<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Access Control System - RTFM</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <link href="../../css/rtfm.css" rel="stylesheet">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="../..">RTFM</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="../..">SYNShop Docs</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Admins <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li class="active">
    <a href="./">Access Control System</a>
</li>
                                    
<li >
    <a href="../c220/">c220 and LXD</a>
</li>
                                    
<li >
    <a href="../create-member-box/">Create a member container</a>
</li>
                                    
<li >
    <a href="../flatline/">Flatline</a>
</li>
                                    
<li >
    <a href="../media/">media</a>
</li>
                                    
<li >
    <a href="../motioneye/">Motion Eye</a>
</li>
                                    
<li >
    <a href="../pi-hole-stubby/">Pi-Hole and Stubby</a>
</li>
                                    
<li >
    <a href="../pritunl/">Pritunl VPN</a>
</li>
                                    
<li >
    <a href="../rtfm/">rtfm</a>
</li>
                                    
<li >
    <a href="../unifi/">Unifi VM</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Users <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../users/FAQ/">FAQ</a>
</li>
                                    
<li >
    <a href="../../users/Local Resources/">Local Resources</a>
</li>
                                    
<li >
    <a href="../../users/Logos/">Logos</a>
</li>
                                    
<li >
    <a href="../../users/Mailing Lists/">Mailing Lists</a>
</li>
                                    
<li >
    <a href="../../users/Online Resources/">Online Resources</a>
</li>
                                    
<li >
    <a href="../../users/SYN Shop Tool List/">SYN Shop Tool List</a>
</li>
                                    
<li >
    <a href="../../users/SYN Shop Vision/">SYN Shop Vision</a>
</li>
                                    
<li >
    <a href="../../users/SYN Shop v1.0/">SYN Shop v1.0</a>
</li>
                                    
<li >
    <a href="../../users/Waivers/">Waivers</a>
</li>
                                    
<li >
    <a href="../../users/media/">Media</a>
</li>
                                    
<li >
    <a href="../../users/member-boxes-faq/">Member Boxes FAQ</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Equipment</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../users/Equipment/Consew 230 Industrial Sewing Machine/">Consew 230 Industrial Sewing Machine</a>
</li>
            
<li >
    <a href="../../users/Equipment/Freestanding Laser Cutter/">Freestanding Laser Cutter</a>
</li>
            
<li >
    <a href="../../users/Equipment/Muse Laser Cutter/">Muse Laser Cutter</a>
</li>
            
<li >
    <a href="../../users/Equipment/Silhoutte Cameo/">Silhoutte Cameo</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Projects</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../users/Projects/555 Contest - Gravity Detecting, Color Swirling Pingpong Balls/">555 Contest - Gravity Detecting, Color Swirling Pingpong Balls</a>
</li>
            
<li >
    <a href="../../users/Projects/Do-nato/">Do-nato</a>
</li>
            
<li >
    <a href="../../users/Projects/Shapeoko PCB Milling/">Shapeoko PCB Milling</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li >
                                <a rel="next" href="../..">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li >
                                <a rel="prev" href="../c220/">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#access-control-system">Access Control System</a></li>
            <li><a href="#project-goal">Project Goal</a></li>
            <li><a href="#purchasing">Purchasing</a></li>
            <li><a href="#adding-cards">Adding Cards</a></li>
            <li><a href="#revoking-cards">Revoking Cards</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="access-control-system">Access Control System<a class="headerlink" href="#access-control-system" title="Permanent link"></a></h1>
<h2 id="project-goal">Project Goal<a class="headerlink" href="#project-goal" title="Permanent link"></a></h2>
<p>Setup access control system for SYN Shop that handles RFID access to the shop, as well as integrates security monitoring.</p>
<p>Initially the system will provide badge access to the front and back doors. Additionally an alarm system will have motion sensors, door sensors, and a glass shatter sensor. System will eventually be integrated with a camera system, but that will be handled as a different project.</p>
<h2 id="purchasing">Purchasing<a class="headerlink" href="#purchasing" title="Permanent link"></a></h2>
<p>The following document was the bill of materials used impliment the access control system</p>
<p><a href="https://docs.google.com/spreadsheet/ccc?key=0As-Fbiasxp7CdC1ZWXZZVzRoRzdycnZjV19ZVW5WMFE#gid=2">Access Control System BOM</a></p>
<h2 id="adding-cards">Adding Cards<a class="headerlink" href="#adding-cards" title="Permanent link"></a></h2>
<p>SSH into the Electric Badger at 10.0.40.10, and connect to the screen session</p>
<pre><code>Linux electric-badger 4.1.13+ #826 PREEMPT Fri Nov 13 20:13:22 GMT 2015 armv6l

The programs included with the Debian GNU/Linux system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
permitted by applicable law.

To connect to the Electric Badger

 screen -x access/access

Last login: Tue Sep 10 21:01:21 2019 from raven.local
krux@electric-badger:~$ screen -x access/access
</code></pre>
<p>The screen session has a tab for a minicom session which interfaces to the serial interface of the badging system,
an access mailer tab, which handles sending out notices, and an optional working bash session.</p>
<p>Once connected to the screen session, press the key combination CTRL+a, and then " to select the minicom session.</p>
<pre><code>Num Name                                                                                                                        Flags

   0 minicom                                                                                                                         $
   1 access mailer                                                                                                                   $
   2 bash                                                                                                                            $
</code></pre>
<p>The '?' key and enter gives you a list of commands</p>
<pre><code>Valid commands are:
(d)ate, (s)show user, (m)odify user &lt;num&gt;  &lt;usermask&gt; &lt;tagnumber&gt;
(a)ll user dump,(r)emove_user &lt;num&gt;,(o)open door &lt;num&gt;
(u)nlock all doors,(l)lock all doors
(1)disarm_alarm, (2)arm_alarm,(3)train_alarm (9)show_status
(t)ime set &lt;sec 0..59&gt; &lt;min 0..59&gt; &lt;hour 0..23&gt; &lt;day of week 1..7&gt;
           &lt;day 0..31&gt; &lt;mon 0..12&gt; &lt;year 0.99&gt;
(e)nable &lt;password&gt; - enable or disable priveleged mode
(h)ardware test - Test the hardware
</code></pre>
<p>Enter into enable mode</p>
<pre><code>e [enable_password]
18:56:22  9/10/19 TUE Priveleged mode enabled.
</code></pre>
<p>Swipe the tag to be programmed on the badge reader</p>
<pre><code>18:56:22  9/10/19 TUE Priveleged mode enabled.
18:57:23  9/10/19 TUE User A1B2C3D4 presented tag at reader 1
18:57:23  9/10/19 TUE User not found
18:57:24  9/10/19 TUE User  denied access at reader 1
</code></pre>
<p>Switch to the base session, or if it's not listed, create a new one by pressing CTRL+a, then c</p>
<p>In the scripts directory there is a file called users.txt.  This is a whitespace delimited text file
that contains the user ID, access level, badge number, name, email, and last verified date.</p>
<p>Find an open ID, set the access level to 254 for all access, and paste in the badge number that showed
in the logs when the badge was swiped.  Fill out the remaining fields and save the file</p>
<pre><code>#ID Access Badge Name_No_Spaces Drupal_name Email_address                                       Last Verified
99 254 A1B2C3D4  Firstname_Lastname      "name@domain.com"                                       2019/10/09
</code></pre>
<p>Select and copy the first three fields, switch back to the minicom session, and add the user
to the badging controller by using the 'm' command followed by the user ID, access level, and
badge number.</p>
<pre><code>m 99 254 A1B2C3D4
19:10:21  9/10/19 TUE User 7 successfully modified
99      254     A1B2C3D4
</code></pre>
<p>Once that's done, test that the badge works.</p>
<h2 id="revoking-cards">Revoking Cards<a class="headerlink" href="#revoking-cards" title="Permanent link"></a></h2>
<p>Switch to the bash session, and edit users.txt and find the badge to be deactivated.</p>
<p>Copy the line to the end of the file, and remark out the line, and add why it's being
deactivated and the current date, then save the file.</p>
<pre><code>#99 254 A1B2C3D4  Firstname_Lastname             "name@domain.com"                         Disabled 2019/10/09 - Canceled account
</code></pre>
<p>Switch to the minicom terminal and switch to enable mode.</p>
<pre><code>e [enable_password]
18:56:22  9/10/19 TUE Priveleged mode enabled.
</code></pre>
<p>Remove the user with the 'r' command followed by the user ID</p>
<pre><code>r 99
99 99     255     FFFFFFFF
19:17:41  9/10/19 TUE User deleted at position 99
</code></pre></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"search": 83, "next": 78, "help": 191, "previous": 80};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
